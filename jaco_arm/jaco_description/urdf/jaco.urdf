<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from jaco.urdf.xacro                | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<!--
 Provides a xacro macro to insert the jaco robot arm.
 NOTE: The gazebo plugins to control the arm are *not* loaded
 from within this file, in order to avoid dependencies to other
 packages. You will have to add the <gazebo> tags to load the
 model plugins from where you call this xacro macro.
 This file however *can* include the <transmission> tags
 for the joints (include file "$(find jaco_description)/urdf/jaco_joint_control.xacro")
 and/or "$(find jaco_description)/urdf/jaco_joint_control_vel.xacro")
 according to arguments add_transmission_pos and add_transmission_vel.
-->
<root xmlns:controller="http://playerstage.sourceforge.net/gazebo/xmlschema/#controller" xmlns:interface="http://playerstage.sourceforge.net/gazebo/xmlschema/#interface" xmlns:sensor="http://playerstage.sourceforge.net/gazebo/xmlschema/#sensor" xmlns:xacro="http://ros.org/wiki/xacro">
  <!-- add transmission tags for position controllers -->
  <!-- add transmission tags for velocity controllers -->
  <!-- IMPORTANT NOTE about arm and finger limits: These values are optimized for mass dividers between 2 (for fingers 1-3)
         for using gazebo_ros_control hardware interface controllers.
         The seemingly most important factor in making robots explode is too much force allowed. Higher PID gains don't have too
         much of an effect. Should maybe start testing with higher PID values to challenge hitting the max force.
         The mass also plays a role. The lighter the robot, the easier it explodes when movements are made.
         When it is heavy, it is harder to lift the arm, and when it moves down, there's a risk of it collapsing down and then exploding after.
         For fingers: with current values, it works only with starting from 1.1 - 1.0 doesn't move. When it's too high, the robot explodes (last tested with finger mass div 1). 
         Velocity was tested between 0.1 and 0.3 but not sure it has an effect.  
         UPDATE 30.1: reducing the damping and friction for some joints has greatly improved the outcome. Damping/Friction probably also has played a roll in the robot collapses. -->
  <!-- Note for reading this in gazebo model (2015): effort and velocity limits are not yet imported properly in gazebo. 
         Update the driver after it does! Now it's hard-coded in C Macros -->
  <!--- remark 2014: damping greater than 0.5 lead to model break downs when testing it bit by bit -->
  <!-- Formula according to https://en.wikipedia.org/wiki/List_of_moment_of_inertia_tensors for cylinder -->
  <!-- fake cylinder which is actually a box -->
  <!--xacro:macro name="cyl_inertia" params="mass r h ">
      <mass value="${mass}"/>
      <inertia
      ixx="${mass / 12.0 * (r*r + h*h)}" ixy="0.0" ixz="0.0"
      iyy="${mass / 12.0 * (h*h + r*r)}" iyz="0.0"
      izz="${mass / 12.0 * (r*r + r*r)}"/>
  </xacro:macro-->
  <!-- ***************** MODEL CORRECTIONS ************************* -->
  <!-- MODEL_FIX corrections for hand limb, which is not modelled correctly. 
  <xacro:property name="wrist_scale_x" value="1.12"/>
  <xacro:property name="wrist_scale_y" value="1.05"/>
  <xacro:property name="wrist_scale_z" value="1.05"/>
  -->
  <!-- MODEL_FIX transform of base to first joint as derived from DH specs is not exact, this is a correction 
  <xacro:property name="base_height_corr" value="-0.005"/>
  <xacro:property name="base_height_corr" value="-0.005"/>
-->
  <!-- MODEL_FIX finger tip visuals are not long enough -->
  <!--
  <xacro:property name="tip_scale_x" value="1.17"/>
  <xacro:property name="tip_scale_y" value="1"/>
  <xacro:property name="tip_scale_z" value="1"/>
  -->
  <!-- *************************************************************** -->
  <!-- MODEL_FIX transforms from wrist to finger joints. Measures from the kinova spec image (Hand.png), pitch angles calculated from measures and experimentally adapted -->
  <!--<xacro:property name="f_thb_xyz" value=" 0.0319  0.003  0.1214" />
  <xacro:property name="f_idx_xyz" value="-0.0276  0.0204 0.1214" />
  <xacro:property name="f_pnk_xyz" value="-0.0276 -0.0204 0.1214" /> -->
  <!-- from measurements, pitch is -0.2658 -->
  <!-- from measurements, pitch is -0.2293 -->
  <!-- from measurements, pitch is -0.2293 -->
  <!-- MODEL_FIX transforms from wrist to finger mounts -->
  <!--<xacro:property name="f_thb_m_xyz" value=" 0.037  0.001  0.106" />
  <xacro:property name="f_idx_m_xyz" value="-0.034  0.022 0.106" />
  <xacro:property name="f_pnk_m_xyz" value="-0.034 -0.022 0.106" />
  <xacro:property name="f_thb_m_rpy" value="0 -0.2658 ${M_PI-0.226892}" /> 
  <xacro:property name="f_idx_m_rpy" value="0 -0.2293 -0.191986" />
  <xacro:property name="f_pnk_m_rpy" value="0 -0.2293 0.191986" />-->
  <!-- MACRO FOR THE ROBOT ARM -->
</root>
